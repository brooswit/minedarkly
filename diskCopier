local masterLabel = ""
local masterPath = ""
local targetPath = ""
local copied = false

while true do
  term.clear()
  if redstone.getInput("front") then
    term.write("Disk Copier: On")
  else
    term.write("Disk Copier: Off")
  end
  
  if disk.isPresent("left") then
    term.write("Master Copy: " .. masterLabel .. " (Present)")
    masterLabel = disk.getLabel("left")
    masterPath = disk.getMountPath("left")
  else
    term.write("Master Copy: Not Present. Insert master copy into left disk drive.")
    copied = false
  end
  
  if disk.isPresent("right") then
    term.write("Target Disk: " .. masterLabel .. " (Present)")
    targetPath = disk.getMountPath("right")
  else
    term.write("Target Disk: Not Present. Insert target disk into right disk drive.")
    copied = false
  end
  
  if disk.isPresent("left") and disk.getMountPath("right") then
    term.write("Not Ready")
  elseif redstone.getInput("front") not true then
    term.write("Ready")
  elseif copied not true then
    term.write("Coping... Do not remove target disk...")
--    local targetFiles = fs.list(targetPath)
--    for _, targetFile in ipairs(targetFiles) do
--      targetFilePath = targetPath .. "/" .. targetFile
--      fs.delete(targetFilePath)
--    end
--    local masterFiles = fs.list(masterPath)
--    for _, masterFile in ipairs(masterFiles) do
--      masterFilePath = masterPath .. "/" .. masterFile
--      targetFilePath = targetPath .. "/" .. masterFile
--      fs.copy(masterFilePath, targetFilePath)
--    end
    copied = true
  else
    term.write("Copied! Remove target disk")
  end
end
